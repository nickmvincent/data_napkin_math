<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Napkin Math</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css">
    <script src="https://unpkg.com/vue@3"></script>
    <style>
        body {
            padding: 20px;
            font-family: Arial, sans-serif;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .card {
            margin-bottom: 20px;
            padding: 20px;
            border-radius: 10px;
            background: #f9f9f9;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .card:hover {
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .collapse {
            margin-bottom: 20px;
        }

        /* Style for the tooltip container */
        .tooltip-container {
            position: relative;
            display: inline-block;
            cursor: pointer;
            margin: 20px;
        }

        /* Tooltip content (hidden by default) */
        .tooltip-content {
            visibility: hidden;
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: #333;
            color: #fff;
            padding: 5px;
            border-radius: 3px;
            white-space: nowrap;
            font-size: 12px;
            z-index: 1;
        }

        /* Show the tooltip when hovering over the container */
        .tooltip-container:hover .tooltip-content {
            visibility: visible;
        }
    </style>
</head>

<body>
    <div id="app" class="container">
        <header class="header">
            <h1>Data Napkin Math for Training Data Value</h1>
            <p>This is a lightweight web-page for making order of magnitude estimates about profit distribution,
                dataset creation costs, and data deals.
            </p>

            <p>
                There are a number of open debates about making policy and setting norms around the use of data for "AI"
                systems.

                Should we focus more on creating mechanisms to opt-out of contributing to AI training, or requiring
                strict opt-in?
                What would happen if we redistribute some of the profits of AI directly to data creators?
                Just how much data are we talking about?
            </p>

            <p>
                Many of these questions involve some abstract moral arguments, but answering them may also depend on
                some
                rough estimates
                of "what kind of numbers are we talking about". Will people be getting $5000 paychecks, or 5 cent
                pittances?

                This tool is interactive so you can edit any assumptions you want. Ultimately, the math here is mostly
                just
                arithmetic (with the potential to hook more elaborate ML training scenarios or agent-based models)
            </p>

            <p>
                To participate in discussion about what some reasonable default values should be, head to the GitHub
                where
                we host the underlying data.
            </p>

            <p>
                There are two types of objects we use here: reported figures, aka the "inputs" (for instance, the number of tokens used to train a model
                or the reported revenue of an AI company) and equations. The idea is, anyone can contribute to this estimation process
                by updating a figure (for instance, when a new paper comes out), contesting an equation, or adding a new scenario.
            </p>
        </header>

        <!-- Collapsible Input Section -->
        <section class="mb-4">
            <button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#inputSection"
                aria-expanded="false" aria-controls="inputSection">
                See ALL Assumptions
            </button>
            <div class="collapse mt-3" id="inputSection">
                <div class="card card-body">
                    <h4>Adjust Inputs</h4>
                    <div v-for="(value, key) in inputs" :key="key" class="mb-3">
                        <label :for="key" class="form-label">{{ formatLabel(key) }}</label>
                        <input type="number" v-model.number="inputs[key]" :id="key" class="form-control"
                            @input="updateCalculations">
                    </div>
                </div>
            </div>
        </section>

        <!-- Napkin Math Section -->
        <section id="napkinMath">
            <h2>Napkin Math Calculations</h2>
            <p>Below are our existing napkin math scenarios. For each scenario, you can play with the assumed values to
                see how things might change.
                You can also see and edit all the assumptions above. To see exactly what's being calculated in each
                scenario, hover over the description.
            </p>

            <!-- Calculation Cards -->
            <div v-for="(calculation, index) in calculations" :key="index" class="card">
                <header>
                    <h4>{{ calculation.title }}</h4>
                    <p>
                    <div class="tooltip-container explanation">{{ calculation.description }} <div
                            class="tooltip-content">{{ calculation.explanation }}</div></span>
                        </p>
                </header>
                <div v-for="inputKey in calculation.inputs" :key="inputKey" class="mb-3">
                    <label :for="inputKey" class="form-label">{{ formatLabel(inputKey) }}</label>
                    <input type="number" v-model.number="inputs[inputKey]" :id="inputKey" class="form-control"
                        @input="updateCalculations">
                </div>
                <footer class="mt-4">
                    <p>{{ calculation.result.label }}: <strong>{{ calculation.result.value }}</strong></p>
                </footer>
            </div>
        </section>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
    <script>
        const app = Vue.createApp({
            data() {
                return {
                    inputs: {
                        totalRevenue: 1000000,
                        contributionPercentage: 10,
                        datasetSize: 1000000000,
                        costPerToken: 0.0001,
                        totalRevenueForToken: 5000000,
                        datasetSizeForRevenue: 1000000000,
                        numberOfContributors: 1000,
                        tokenWeight: 2,
                        tokensContributed: 10000,
                        valuableTokens: 5000,
                        regularTokens: 5000
                    },
                    calculations: [
                        {
                            title: 'Estimating Contributor Value',
                            description: 'We are estimating the value a contributor might receive based on their contribution percentage and total revenue.',
                            inputs: ['totalRevenue', 'contributionPercentage'],
                            result: {
                                label: 'Estimated Contributor Value',
                                value: 0
                            },
                            explanation: 'totalRevenue * (contributionPercentage / 100)'
                        },
                        {
                            title: 'Cost to Commission a New Dataset',
                            description: 'We are calculating the cost to commission a new dataset based on the size of the dataset and the cost per token.',
                            inputs: ['datasetSize', 'costPerToken'],
                            result: {
                                label: 'Estimated Dataset Cost',
                                value: 0
                            },
                            explanation: 'datasetSize * costPerToken'
                        },
                        {
                            title: 'Revenue per Token Calculation',
                            description: 'We are calculating the estimated revenue generated per token based on total revenue and dataset size.',
                            inputs: ['totalRevenueForToken', 'datasetSizeForRevenue'],
                            result: {
                                label: 'Estimated Revenue per Token',
                                value: 0
                            },
                            explanation: 'totalRevenueForToken / datasetSizeForRevenue'
                        },
                        {
                            title: 'Dividing LLM-Related Money Amongst Everyone',
                            description: 'What if we just divide LLM-related money amongst everyone?',
                            inputs: ['totalRevenue', 'numberOfContributors'],
                            result: {
                                label: 'Amount per Contributor',
                                value: 0
                            },
                            explanation: 'totalRevenue / numberOfContributors'
                        },
                        {
                            title: 'Apportion Based on Tokens',
                            description: 'What if we apportion revenue based on the number of tokens contributed?',
                            inputs: ['totalRevenue', 'datasetSize', 'tokensContributed'],
                            result: {
                                label: 'Revenue Share Based on Tokens',
                                value: 0
                            },
                            explanation: 'totalRevenue * (tokensContributed / datasetSize)'
                        },
                        {
                            title: 'Valuable Tokens Contribution',
                            description: 'What if certain categories of tokens are extra valuable, and we assign more weight to those tokens?',
                            inputs: ['totalRevenue', 'valuableTokens', 'tokenWeight', 'regularTokens', 'datasetSize'],
                            result: {
                                label: 'Weighted Revenue Share',
                                value: 0
                            },
                            explanation: '(totalRevenue * ((valuableTokens * tokenWeight + regularTokens) / (datasetSize * tokenWeight)))'
                        }
                    ]
                };
            },
            methods: {
                formatLabel(key) {
                    return key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
                },
                updateCalculations() {
                    this.calculations.forEach(calculation => {
                        const inputs = calculation.inputs.reduce((acc, key) => {
                            acc[key] = this.inputs[key];
                            return acc;
                        }, {});

                        let result = 0;
                        if (calculation.title === 'Estimating Contributor Value') {
                            result = inputs.totalRevenue * (inputs.contributionPercentage / 100);
                        } else if (calculation.title === 'Cost to Commission a New Dataset') {
                            result = inputs.datasetSize * inputs.costPerToken;
                        } else if (calculation.title === 'Revenue per Token Calculation') {
                            result = inputs.totalRevenueForToken / inputs.datasetSizeForRevenue;
                        } else if (calculation.title === 'Dividing LLM-Related Money Amongst Everyone') {
                            result = inputs.totalRevenue / inputs.numberOfContributors;
                        } else if (calculation.title === 'Apportion Based on Tokens') {
                            result = inputs.totalRevenue * (inputs.tokensContributed / inputs.datasetSize);
                        } else if (calculation.title === 'Valuable Tokens Contribution') {
                            const weightedTokens = inputs.valuableTokens * inputs.tokenWeight + inputs.regularTokens;
                            result = inputs.totalRevenue * (weightedTokens / (inputs.datasetSize * inputs.tokenWeight));
                        }

                        calculation.result.value = this.humanReadable(result);
                    });
                },
                humanReadable(value) {
                    if (value === 0) return '0';
                    if (Math.abs(value) < 1) return value.toString();
                    const units = ['', 'thousand', 'million', 'billion', 'trillion'];
                    const order = Math.floor(Math.log10(Math.abs(value)) / 3);
                    const unitName = units[order] || `10^${order * 3}`;
                    return `${(value / Math.pow(10, 3 * order)).toFixed(2)} ${unitName}`;
                }
            },
            mounted() {
                this.updateCalculations();
            }
        });

        app.mount('#app');
    </script>
</body>

</html>